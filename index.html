<!DOCTYPE html>
<html lang="ko">

<head>
    <title>Select</title>
    <meta charset="utf-8">
    <link href="//kimkee.github.io/ui/static/img/common/favicon.ico" rel="shrtcut icon">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">
    <script src="//cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="./style.css?v=3">
</head>

<body class="body">

    <span class="select-pop">
        <select class="slist" name="select_pop_1">
            <option value="val_0">옵션 선택</option>
            <option value="val_1">1번째 선택</option>
            <option value="val_2">2번째 선택</option>
            <option value="val_3" selected>3번째 선택</option>
            <option value="val_4">4번째 선택</option>
            <option value="val_5">5번째 선택</option>
            <option value="val_6">6번째 선택</option>
            <option value="val_7" disabled>7번째 비활성</option>
            <option value="val_8">8번째 선택</option>
        </select>
    </span>
    <span class="select-pop">
        <select class="slist" name="select_pop_2" data-select-title="옵션을 선택해 주세요">
            <option value="val_0">옵션 선택</option>
            <option value="val_A">A번째 선택</option>
            <option value="val_B">B번째 선택</option>
            <option value="val_C">C번째 선택</option>
            <option value="val_D">D번째 선택</option>
            <option value="val_E">E번째 선택</option>
            <option value="val_F">F번째 선택</option>
            <option value="val_G" disabled>G번째 비활성</option>
            <option value="val_H">H번째 선택</option>
        </select>
    </span>

    <div class="test-box">
        <span class="select-pop">
            <select class="slist" name="select_month"></select>
        </span>
        <span class="select-pop">
            <select class="slist" name="select_days"></select>
        </span>
    </div>

    <div>
        <button type="button" class="btn sm" onclick="test_select_1();">B번째 선택</button>
        <button type="button" class="btn sm" onclick="test_select_2();">비활성화</button>
        <button type="button" class="btn sm" onclick="test_select_3();">활성화</button>
    </div>
    <script>
        const test_select_1 = () => {
            document.querySelector("select[name='select_pop_2']").value = "val_B";
            ui.popsel.set();
        }
        const test_select_2 = () => {
            document.querySelector("select[name='select_pop_2']").disabled = true;
            ui.popsel.set();
        }
        const test_select_3 = () => {
            document.querySelector("select[name='select_pop_2']").disabled = false;
            ui.popsel.set();
        }


        const datepicks = {
            month:[ "01","02","03","04","05","06","07","08","09","10","11","12"],
            days:[ "01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],
            set: function(){
                document.querySelector(`[name="select_month"]`).innerHTML = this.month.map( d => `<option>${d}</option>` );
                document.querySelector(`[name="select_month"]`).value = "06"
                document.querySelector(`[name="select_days"]`).innerHTML = this.days.map( d => `<option>${d}</option>` );
                document.querySelector(`[name="select_days"]`).value = "07"
            },
        }
        datepicks.set();

        
        /* $(this).addClass("active").siblings("li").removeClass("active"); */
        document.querySelectorAll(".btn.sm").forEach(li => {
            li.addEventListener("click", () => {
                li.classList.add("active");
                [...li.parentNode.children].filter(sibling => sibling !== li)
                .forEach(sibling => sibling.classList.remove("active"));
            });
        });


        /*  $(".box").unwrap() */
        document.querySelectorAll(".box").forEach(box => {
            const pElm = box.parentElement;
            while (box.firstChild) {
                pElm.insertBefore(box.firstChild, box);
            }
            pElm.removeChild(box);
        });

        /* $(".box").wrap(`<div class="www"></div>`) */
        document.querySelectorAll(".box").forEach(box => {
            const wrap = document.createElement("div");
            wrap.classList.add("www");
            box.parentNode.insertBefore(wrap, box);
            wrap.appendChild(box);
        });


        // $("body,html").animate({ scrollTop: 0 }, 200, function() {
        //         console.log("도착")
        // });
        const scrollToPosition = (selector, position, duration, callback) => {
            const element = document.querySelector(selector);
            if (!element) return;

            const startingYOffset = element.scrollTop || document.documentElement.scrollTop;
            const targetYOffset = position;
            const startTime = performance.now();

            const animateScroll = (timestamp) => {
                const currentTime = timestamp - startTime;
                const progress = Math.min(currentTime / duration, 1);
                const easeInOutCubic = progress < 0.5 ? 4 * progress * progress * progress : (progress - 1) * (2 * progress - 2) * (2 * progress - 2) + 1;
                const yOffset = startingYOffset + (targetYOffset - startingYOffset) * easeInOutCubic;

                if (element === document.body) {
                    window.scrollTo(0, yOffset);
                } else {
                    element.scrollTop = yOffset;
                }

                if (currentTime < duration) {
                    requestAnimationFrame(animateScroll);
                } else {
                    if (typeof callback === 'function') {
                        callback();
                    }
                }
            };

            requestAnimationFrame(animateScroll);
        };

        // 예시로 body와 .box 영역을 동시에 스크롤하여 100px 지점으로 이동하는 코드
        /* scrollToPosition(document.body, 100, 200, () => {
            console.log("body 도착");
        });

        const boxElement = document.querySelector(".box");
        scrollToPosition(boxElement, 100, 200, () => {
            console.log(".box 도착");
        }); */




    </script>

    <script src="./select.js?v=3"></script>
</body>

</html>